@(title: String)(content: Html)

<!DOCTYPE html>

<html lang="es" ng-app="vestaroMain">
    <head>
        <title>@title</title>
        <meta content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="krea group">
        
        <!-- Fav icons -->
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">      

        <!-- Basic 3rd parties libraries -->
        <script src="@routes.Assets.at("lib/angularjs/1.0.8/angular.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("lib/angularjs/1.0.8/angular-resource.js")" type="text/javascript"></script>

        <script src="@routes.Assets.at("lib/jQuery/2.0.3/jquery-2.0.3.min.js")" type="text/javascript"></script>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("lib/jQuery/2.0.3/jquery-ui.css")">

        <script src="@routes.Assets.at("lib/bootstrap/3.0.0/bootstrap.min.js")" type="text/javascript"></script>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("lib/bootstrap/3.0.0/bootstrap-responsive.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("lib/bootstrap/3.0.0/bootstrap.min.css")">

        <!-- App's Stylesheets -->
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/main.css")">

        <!-- App's Javascripts -->
        <script src='@routes.Application.javascriptRoutes()' type="text/javascript"></script>
        <script src="@routes.Assets.at("js/app.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/routingNavigation.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/controllers.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/filters.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/directives.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/easyrecFunctions.js")" type="text/javascript"></script>

        <!-- Selective 3rd parties libraries -->
        
        


<!-- Javascripts -->

        
        <script src="@routes.Assets.at("lib/jQuery-plugins/jquery.isotope.min.js")" type="text/javascript"></script>
        


        <style>
            body {
                padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
            }
        </style>
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="../assets/js/html5shiv.js"></script>
        <![endif]-->
    </head>
  <body>
      <div id="fb-root"></div>
      <!-- Le javascript de autenticacion, se tiene que cargar lo mas rapido posible por eso esta antes de body-->
      <script>
        // Additional JS functions here
        window.fbAsyncInit = function() {
          FB.init({
            appId      : '578879162134484', // App id
            channelUrl : '//localhost:9000/assets/channel.html', // Channel File
            status     : false, // check login status. HACK: Disable to avoid double login when user is logged into fb and app authorized.
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
          });
          
          // Additional init code here

          // Here we subscribe to the auth.authResponseChange JavaScript event. This event is fired
            // for any authentication related change, such as login, logout or session refresh. This means that
            // whenever someone who was previously logged out tries to log in again, the correct case below 
            // will be handled. 
            console.log('subscribing to the auth.authResponseChange JavaScript event...');
            FB.Event.subscribe('auth.authResponseChange', function(response) {
              // Here we specify what we do with the response anytime this event occurs. 
              if (response.status === 'connected') {
                // The response object is returned with a status field that lets the app know the current
                // login status of the person. In this case, we're handling the situation where they 
                // have logged in to the app.
                $.post("@routes.Authentication.login()", response.authResponse)
                  .done(function(data) {
                    console.log("Data Loaded: " + data);
                  });

                $('.navbar .nav .currentUserImg').load(function () {
                      $(this).show();
                  }).error(function () {
                      console.log("user's profile image could not be loaded.");
                  }).attr('src','http://graph.facebook.com/'+response.authResponse.userID+'/picture')
                console.log('Event detected: User connected & app accepted. Fetching your information.... ');
                  FB.api('/me', function(response) {
                      $('.navbar .nav .currentUsername').text(response.name).show();
                    console.log('Good to see you, ' + response.name + '.');
                  });                    
                  $('#fbSignIn').hide();
                  $('.navbar .connectingWithFbLabel').hide();
                  $('.navbar .loggedUserOptions').fadeIn();
                  

              //If app is not allow, aparently callbackfunction is never call. 
              //} else if (response.status === 'not_authorized') {
              //  // In this case, the person is logged into Facebook, but not into the app, so we call
              //  // FB.login() to prompt them to do so. 
              //  // In real-life usage, you wouldn't want to immediately prompt someone to login 
              //  // like this, for two reasons:
              //  // (1) JavaScript created popup windows are blocked by most browsers unless they 
              //  // result from direct interaction from people using the app (such as a mouse click)
              //  // (2) it is a bad experience to be continually prompted to login upon page load.
              //  console.log('not_authorized event detectec.');
              } else {
                // In this case, the person is not logged into Facebook, so we call the login() 
                // function to prompt them to do so. Note that at this stage there is no indication
                // of whether they are logged into the app. If they aren't then they'll see the Login
                // dialog right after they log in to Facebook. 
                // The same caveats as above apply to the FB.login() call here.
                console.log('Event detected: User not logged to FB.');
              }
            });

              console.log('getLoginStatus...');
              // As check login status was set to false, initial login check has to be manually triggered.
              // In case user is logged, no action has to be taken as it would be automatically triggered becuase sdk subscribed to auth.authResponseChange JavaScript event.
              FB.getLoginStatus(function(response) {
                       if (response.status === 'connected') {
                           console.log('getLoginStatus answered already logged as user ' + response.authResponse.userID + '.');
                       }else{
                          console.log('getLoginStatus answered not logged. Loading logIn optionsd...');
                          // FB.login();
                          // Show Ui to log in.
                          $('#fbSignIn').show();
                       }
                       
                  },function(error){
                      console.log('FB login error: ' + error);
                  });

        };

        // Load the SDK asynchronously
        (function(d){
           var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           ref.parentNode.insertBefore(js, ref);
         }(document));
      </script>
  	<nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="min-height: 0px;">
  		<!-- Brand and toggle get grouped for better mobile display -->
  		<div class="navbar-header">
  			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
  				<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span
  					class="icon-bar"></span>
  			</button>
  			<a class="vestaro-logo navbar-brand" style="padding-bottom: 0px; padding-top: 8px; color: #2974B9; font-size: 36px;">Vestaro</a>
  		</div>

  		<!-- Collect the nav links, forms, and other content for toggling -->
  		<div class="collapse navbar-collapse navbar-ex1-collapse">
  			<ul ng-controller="NavCtrl" class="nav navbar-nav">
  				<li ng-repeat="view in views" ng-class="{active: isActive(view)}">
  				<a style="padding-bottom: 10px; padding-top: 10px;" href="#{{view.path}}">
  				<span class="glyphicon glyphicon-{{view.icon}}"></span> {{view.title}}</a>
  				</li>
  			</ul>
  			<form class="navbar-form navbar-left" role="search" style="margin-bottom: 3px; margin-top: 3px;">
  				<div class="form-group">
  					<input type="text" class="form-control search-input" placeholder="Codigo de prenda...">
  				</div>
  				<button type="button" class="btn btn-default search-btn">
  					<span class="glyphicon glyphicon-search"></span>
  				</button>
  			</form>
  			<ul class="nav navbar-nav navbar-right loggedUserOptions" style="display: none;">
  				<li><a style="padding: 9px 15px 6px;"><img src="" class="currentUserImg"
  						style="display: none; height: 23px; width: 23px; border: 1px solid #ccc;"> <span class="currentUsername"
  						style="display: none;"></span></a>
  				</li>
  				<li class="dropdown"><a style="padding-bottom: 10px; padding-top: 10px;" class="dropdown-toggle"
  					data-toggle="dropdown">Comprador <b class="caret"></b></a>
  					<ul class="dropdown-menu">
  						<li class="dropdown-header">Usar Vestaro como:</li>
  						<li class="divider"></li>
  						<li><a><span class="glyphicon glyphicon-ok pull-right"></span>Comprador</a></li>
  						<li><a>Vendedor</a></li>
  						<li class="divider"></li>
  						<li><a onclick="FB.logout(function(response) {$('.navbar .loggedUserOptions').fadeOut();});">Salir</a></li>
  					</ul>
  				</li>
  			</ul>
  		  <div ng-include="'@routes.Assets.at("html/loginNavbar.html")'"></div>
  		</div>
  		<!-- /.navbar-collapse -->
    </nav>
    <!-- /container -->
    <div id="main" class="container">
      <div ng-view></div>
    </div> 
          
    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <!-- Delete if not necesary
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script> -->
    <script type="text/javascript" src="https://www.mercadopago.com/org-img/jsapi/mptools/buttons/render.js"></script>
  </body>
</html>
