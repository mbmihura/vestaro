@(title: String)(content: Html)

<!DOCTYPE html>

<html lang="es" ng-app>
    <head>
        <title>@title</title>
        <meta content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="krea group">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap3.min.css")">
        <script src="@routes.Assets.at("javascripts/jquery-2.0.3.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap3.min.js")" type="text/javascript"></script>
        <script src='@routes.Application.javascriptRoutes()' type="text/javascript"></script>
        <!-- Fav icons -->
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">

        <!-- AngularJS & fireBase SDKs -->
        <!-- Local in server version -->
        <script src="@routes.Assets.at("js/angularjs/1.0.7/angular.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/angularjs/1.0.7/angular-resource.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/firebase/v0/firebase.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("js/firebase/angularFire.js")" type="text/javascript"></script>
        <!-- Online scrits in content delivery networks version -->
        <!--
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular-resource.min.js"></script>
        <script src="https://cdn.firebase.com/v0/firebase.js"></script>
        <script src="http://firebase.github.io/angularFire/angularFire.js"></script> -->
        
        <script src="@routes.Assets.at("js/projects.js")"></script>

        <!-- Le styles -->
        <style>
            body {
                padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
            }
        </style>
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="../assets/js/html5shiv.js"></script>
        <![endif]-->
    </head>
    <body>
        <div id="fb-root"></div>
        <!-- Le javascript de autenticacion, se tiene que cargar lo mas rapido posible por eso esta antes de body-->
        <script>
          // Additional JS functions here
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '578879162134484', // App id
              channelUrl : '//localhost:9000/assets/channel.html', // Channel File
              status     : false, // check login status. HACK: Disable to avoid double login when user is logged into fb and app authorized.
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

            // Additional init code here

            // Here we subscribe to the auth.authResponseChange JavaScript event. This event is fired
              // for any authentication related change, such as login, logout or session refresh. This means that
              // whenever someone who was previously logged out tries to log in again, the correct case below 
              // will be handled. 
              console.log('subscribing to the auth.authResponseChange JavaScript event...');
              FB.Event.subscribe('auth.authResponseChange', function(response) {
                // Here we specify what we do with the response anytime this event occurs. 
                if (response.status === 'connected') {
                  // The response object is returned with a status field that lets the app know the current
                  // login status of the person. In this case, we're handling the situation where they 
                  // have logged in to the app.
                  $.post("@routes.Authentication.login()", response.authResponse)
                    .done(function(data) {
                      alert("Data Loaded: " + data);
                    });

                  $('.navbar .nav .currentUserImg').load(function () {
                        $(this).show();
                    }).error(function () {
                        console.log("user's profile image could not be loaded.");
                    }).attr('src','http://graph.facebook.com/'+response.authResponse.userID+'/picture')
                  console.log('Event detected: User connected & app accepted. Fetching your information.... ');
                    FB.api('/me', function(response) {
                        $('.navbar .nav .currentUsername').text(response.name).show();
                      console.log('Good to see you, ' + response.name + '.');
                    });
                    $('#fbSignIn').hide();
                    $('.navbar .connectingWithFbLabel').hide();
                    $('.navbar .loggedUserOptions').fadeIn();
                    

                //If app is not allow, aparently callbackfunction is never call. 
                //} else if (response.status === 'not_authorized') {
                //  // In this case, the person is logged into Facebook, but not into the app, so we call
                //  // FB.login() to prompt them to do so. 
                //  // In real-life usage, you wouldn't want to immediately prompt someone to login 
                //  // like this, for two reasons:
                //  // (1) JavaScript created popup windows are blocked by most browsers unless they 
                //  // result from direct interaction from people using the app (such as a mouse click)
                //  // (2) it is a bad experience to be continually prompted to login upon page load.
                //  console.log('not_authorized event detectec.');
                } else {
                  // In this case, the person is not logged into Facebook, so we call the login() 
                  // function to prompt them to do so. Note that at this stage there is no indication
                  // of whether they are logged into the app. If they aren't then they'll see the Login
                  // dialog right after they log in to Facebook. 
                  // The same caveats as above apply to the FB.login() call here.
                  console.log('Event detected: User not logged to FB.');
                }
              });

                console.log('getLoginStatus...');
                // As check login status was set to false, initial login check has to be manually triggered.
                // In case user is logged, no action has to be taken as it would be automatically triggered becuase sdk subscribed to auth.authResponseChange JavaScript event.
                FB.getLoginStatus(function(response) {
                         if (response.status === 'connected') {
                             console.log('getLoginStatus answered already logged as user ' + response.authResponse.userID + '.');
                         }else{
                            console.log('getLoginStatus answered not logged. Loading logIn optionsd...');
                            // FB.login();
                            // Show Ui to log in.
                            $('#fbSignIn').show();
                         }
                         
                    },function(error){
                        console.log('FB login error: ' + error);
                    });

          };

          // Load the SDK asynchronously
          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
        </script>
       
		<nav class="navbar navbar-fixed-top" role="navigation" style="
    min-height: 0px;
">
		  <!-- Brand and toggle get grouped for better mobile display -->
		  <div class="navbar-header">
		    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
		      <span class="sr-only">Toggle navigation</span>
		      <span class="icon-bar"></span>
		      <span class="icon-bar"></span>
		      <span class="icon-bar"></span>
		    </button>
		    <a class="navbar-brand" href="#" style="padding-bottom: 0px; padding-top: 8px; font-family: 'vivaldi'; font-size: 36px;color: #2974B9;letter-spacing: 3px;">Vestaro</a>
		  </div>
		
		  <!-- Collect the nav links, forms, and other content for toggling -->
		  <div class="collapse navbar-collapse navbar-ex1-collapse">
		    <ul class="nav navbar-nav">
                  <li class="active"><a style="
    padding-bottom: 10px;
    padding-top: 10px;
" href="@routes.Application.index"><span class="glyphicon glyphicon-home"></span> Inicio</a></li>
                  <li><a style="
    padding-bottom: 10px;
    padding-top: 10px;
" href="@routes.Application.index"><span class="glyphicon glyphicon-star"></span> Wishlist</a></li>
                  <li><a style="
    padding-bottom: 10px;
    padding-top: 10px;
" href="@routes.Application.index"><span class="glyphicon glyphicon-user"></span> Perfil</a></li>
                  <li class='items-btn'><a style="
    padding-bottom: 10px;
    padding-top: 10px;
" href="#item"><span class="glyphicon glyphicon-th"></span> Prendas</a></li>
            </ul>
		    <form class="navbar-form navbar-left" role="search" style="
    margin-bottom: 3px;
    margin-top: 3px;
">
		      <div class="form-group">
		        <input type="text" class="form-control search-input" placeholder="Codigo de prenda...">
		      </div>
		      <button type="button" class="btn btn-default search-btn"><span class="glyphicon glyphicon-search"></span></button>
		    </form>
			<ul class="nav navbar-nav navbar-right loggedUserOptions" style="display:none;">
                <li><a href="#" style="padding: 9px 15px 6px;"><img src="" class="currentUserImg" style="display:none;height:23px; width:23px;border: 1px solid #ccc;"> <span class="currentUsername" style="display:none;"></span></a></li>
                <li class="dropdown" >
                    <a style="
    padding-bottom: 10px;
    padding-top: 10px;
" href="#" class="dropdown-toggle" data-toggle="dropdown">Comprador <b class="caret"></b></a>
                    <ul class="dropdown-menu" >
                        <li class="dropdown-header">Usar Vestaro como:</li>
                        <li class="divider"></li>
                        <li><a href="#"><span class="glyphicon glyphicon-ok pull-right"></span>Comprador</a></li>
                        <li><a href="#">Vendedor</a></li>
                        <li class="divider"></li>
                        <li><a href="#" onclick="FB.logout(function(response) {$('.navbar .loggedUserOptions').fadeOut();});"@* This shouldn be done. TODO: Move function when general js file is defined. *@>Salir</a></li>
                    </ul>
                </li>
            </ul>
             <div ng-include="'@routes.Assets.at("html/loginNavbar.html")'"></div>
		  </div><!-- /.navbar-collapse -->
		</nav>
        <!-- /container -->
        <div id="main" class="container">
          @content
        </div> 
        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src='@routes.Assets.at("javascripts/main.js")' type="text/javascript"></script>
        <!-- Delete if not necesary
        <script src="../assets/js/bootstrap-transition.js"></script>
        <script src="../assets/js/bootstrap-alert.js"></script>
        <script src="../assets/js/bootstrap-modal.js"></script>
        <script src="../assets/js/bootstrap-dropdown.js"></script>
        <script src="../assets/js/bootstrap-scrollspy.js"></script>
        <script src="../assets/js/bootstrap-tab.js"></script>
        <script src="../assets/js/bootstrap-tooltip.js"></script>
        <script src="../assets/js/bootstrap-popover.js"></script>
        <script src="../assets/js/bootstrap-button.js"></script>
        <script src="../assets/js/bootstrap-collapse.js"></script>
        <script src="../assets/js/bootstrap-carousel.js"></script>
        <script src="../assets/js/bootstrap-typeahead.js"></script> -->
    </body>
</html>